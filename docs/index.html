<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Comparer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }
        .container {
            position: relative;
            width: 100%;
            height: 100%;
			left:0;
			top:0;
            cursor: grab;
            overflow: scroll; /* Enable scrolling */
            transform-origin: center;
            transition: transform 0.1s ease;
        }
        img {
            display: block;
            width: 100%;
            height: auto;
        }
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 1;
            transition: opacity 0.1s ease;
        }
        .controls {
            position: fixed;
            top: 10px;
            right: 10px;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 10px;
            border-radius: 5px;
            display: flex;
            gap: 10px;
            z-index: 10;
            width: auto;
        }
        .controls button {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
        }
        .controls button:hover {
            color: #007BFF;
        }
    </style>
</head>
<body>
	<div class="controls" id="controls">
		üîç<button id="zoomOut">-</button> 
		<button id="zoomIn">+</button>
		<button id="togglePosition">‚Üî</button>
	</div>
    <div class="containerOuter" id="imageContainerOuter">
    <div class="container" id="imageContainer">
        <img src="a.jpg" alt="Base Image" id="baseImage">
        <img src="overlay.jpg" alt="Overlay Image" class="overlay" id="overlayImage">
    </div>
</div>

    <script>
    	console.log("\n");
    	console.log("\n");
    	console.log("\n");
        const overlayImage = document.getElementById('overlayImage');
        const baseImage = document.getElementById('baseImage');
        const controls = document.getElementById('controls');
        const zoomInButton = document.getElementById('zoomIn');
        const zoomOutButton = document.getElementById('zoomOut');
        const togglePositionButton = document.getElementById('togglePosition');
        const imageContainer = document.getElementById('imageContainer');
        const imageContainerOuter = document.getElementById('imageContainerOuter');

        let zoomLevel = 1;
        let zoomAmt = .005
        let isRightPosition = true;
       
        let isDragging = false;
        let startX, startY, scrollLeft, scrollTop;


		const images = document.querySelectorAll('img');
		images.forEach(image => {
			image.addEventListener('dragstart', (e) => {
				e.preventDefault();  // Prevent the default image drag
			});
		});
		

        overlayImage.addEventListener('click', () => {
            overlayImage.style.opacity = overlayImage.style.opacity == 1 ? 0 : 1;
        });

		// Continuous zoom in
		zoomInButton.addEventListener('mousedown', () => {
			zoomInterval = setInterval(() => {
				zoomLevel += zoomAmt + zoomLevel*.01;
				imageContainer.style.transform = `scale(${zoomLevel})`;
			}, 10); // Adjust the interval time (ms) as needed
		});

		zoomInButton.addEventListener('mouseup', () => {
			clearInterval(zoomInterval);
		});

		zoomInButton.addEventListener('mouseleave', () => {
			clearInterval(zoomInterval);
		});

		// Continuous zoom out
		zoomOutButton.addEventListener('mousedown', () => {
			zoomInterval = setInterval(() => {
				if (zoomLevel >= zoomAmt*2) {
					zoomLevel -= zoomAmt + zoomLevel*.01;
					imageContainer.style.transform = `scale(${zoomLevel})`;
				}
			}, 10); // Adjust the interval time (ms) as needed
		});

		zoomOutButton.addEventListener('mouseup', () => {
			clearInterval(zoomInterval);
		});

		zoomOutButton.addEventListener('mouseleave', () => {
			clearInterval(zoomInterval);
		});



        togglePositionButton.addEventListener('click', () => {
            isRightPosition = !isRightPosition;
            controls.style.right = isRightPosition ? '10px' : 'auto';
            controls.style.left = isRightPosition ? '' : '10px';
        });

		imageContainerOuter.addEventListener('mousedown', (e) => {
			isDragging = true;
			imageContainer.style.cursor = 'grabbing';
			startX = e.pageX;
			startY = e.pageY;
			scrollLeft = parseInt(getComputedStyle(imageContainer).left, 10);
			scrollTop = parseInt(getComputedStyle(imageContainer).top, 10);
			console.log('scrolll onevent: ', scrollLeft);
			console.log('scrollr onevent: ', scrollTop);
			console.log('StartX:', startX, 'StartY:', startY);
		});

		imageContainerOuter.addEventListener('mousemove', (e) => {
			if (!isDragging) return;
			e.preventDefault();

			// Calculate the difference in the mouse movement
			const walkX = (e.pageX - startX) * 1; // Adjust the multiplier as needed
			const walkY = (e.pageY - startY) * 1;

			// Apply the new calculated positions
			const newLeft = (scrollLeft + walkX) + "px";
			const newTop = (scrollTop + walkY) + "px";

			console.log("newl:", newLeft, "newt:", newTop);
			imageContainer.style.left = newLeft;
			imageContainer.style.top = newTop;
		});

		imageContainerOuter.addEventListener('mouseup', () => {
			isDragging = false;
			imageContainer.style.cursor = 'grab';
		});

		imageContainer.addEventListener('mouseleave', () => {
			isDragging = false;
			imageContainer.style.cursor = 'grab';
		});
    </script>
</body>
</html>
