<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Image with toggleable overlay interface. -->
    <!-- While my zoom buttons work, the user will want to zoom in very close, with images far exceeding the view area, yet I can't get the mouse-drag panning to work. My log shows several lines of non-zero values but the container doesn't change position (or the imges inside it don't). ALSO, after several lines of output, the log data stops outputting and it seems the normal browser image drag event seems to kick in, which is really weird. But let's first focus on the container not moving, which seems like it should be impossible. -->

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Comparer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            /* overflow: auto; cannot use or user cannot browse with browser scroll for now. MAYBE if we get mouse drag to work we can put this back LATER. */
        }
        .container {
            position: relative;
            width: 100%;
            height: 100%;
            cursor: grab;
        }
        img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: contain;
            transform-origin: center;
            transition: transform 0.1s ease;
        }
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 1;
            transition: opacity 0.1s ease;
        }
        .controls {
            position: fixed;
            top: 10px;
            right: 10px;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 10px;
            border-radius: 5px;
            display: flex;
            gap: 10px;
            z-index: 10;
            width: auto;
        }
        .controls button {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
        }
        .controls button:hover {
            color: #007BFF;
        }
    </style>
</head>
<body>
    <div class="container" id="imageContainer">
        <img src="a.jpg" alt="Base Image" id="baseImage">
        <img src="overlay.jpg" alt="Overlay Image" class="overlay" id="overlayImage">
        <div class="controls" id="controls">
            üîç<button id="zoomOut">-</button> 
            <button id="zoomIn">+</button>
            <button id="togglePosition">‚Üî</button>
        </div>
    </div>

    <script>
        const overlayImage = document.getElementById('overlayImage');
        const baseImage = document.getElementById('baseImage');
        const controls = document.getElementById('controls');
        const zoomInButton = document.getElementById('zoomIn');
        const zoomOutButton = document.getElementById('zoomOut');
        const togglePositionButton = document.getElementById('togglePosition');
        const imageContainer = document.getElementById('imageContainer');

        let zoomLevel = 1;
        let isRightPosition = true;
        let isDragging = false;
        let startX, startY, scrollLeft, scrollTop;

        overlayImage.addEventListener('click', () => {
            overlayImage.style.opacity = overlayImage.style.opacity == 1 ? 0 : 1;
        });

        zoomInButton.addEventListener('click', () => {
            zoomLevel += 0.1;
            baseImage.style.transform = `scale(${zoomLevel})`;
            overlayImage.style.transform = `scale(${zoomLevel})`;
        });

        zoomOutButton.addEventListener('click', () => {
            if (zoomLevel > 0.1) {
                zoomLevel -= 0.1;
                baseImage.style.transform = `scale(${zoomLevel})`;
                overlayImage.style.transform = `scale(${zoomLevel})`;
            }
        });

        togglePositionButton.addEventListener('click', () => {
            isRightPosition = !isRightPosition;
            controls.style.right = isRightPosition ? '10px' : 'auto';
            controls.style.left = isRightPosition ? '' : '10px';
        });

        // Enable panning with mouse drag
        imageContainer.addEventListener('mousedown', (e) => {
            isDragging = true;
            imageContainer.style.cursor = 'grabbing';
            startX = e.pageX - imageContainer.offsetLeft;
            startY = e.pageY - imageContainer.offsetTop;
            scrollLeft = imageContainer.scrollLeft;
            scrollTop = imageContainer.scrollTop;
        });

        imageContainer.addEventListener('mouseleave', () => {
            isDragging = false;
            imageContainer.style.cursor = 'grab';
        });

        imageContainer.addEventListener('mouseup', () => {
            isDragging = false;
            imageContainer.style.cursor = 'grab';
        });

        imageContainer.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            e.preventDefault();
            const x = e.pageX - imageContainer.offsetLeft;
            const y = e.pageY - imageContainer.offsetTop;
            const walkX = (x - startX) * 2; // Multiplied by 2 for faster panning
            const walkY = (y - startY) * 2;
            imageContainer.scrollLeft = scrollLeft - walkX;
            imageContainer.scrollTop = scrollTop - walkY;
            console.log(scrollLeft-walkX, scrollTop-walkY);
        });
    </script>
</body>
</html>
<!-- vim: et -->
